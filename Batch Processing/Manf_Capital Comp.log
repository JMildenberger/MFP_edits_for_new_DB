1                                                        The SAS System                              13:50 Friday, June 23, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M3) 
      Licensed to BUREAU OF LABOR STATISTICS, Site 70108914.
NOTE: This session is executing on the X64_7PRO  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.1
      SAS/ETS 14.1
      SAS/OR 14.1
      SAS/IML 14.1

NOTE: Additional host information:

 X64_7PRO WIN 6.1.7601 Service Pack 1 Workstation

NOTE: SAS initialization used:
      real time           0.53 seconds
      cpu time            0.42 seconds
      
1          /*Allows SEG to replace variable names with spaces from Excel files with an underscore*/
2          options validvarname=v7;
3          
4          libname capital 'Q:\MFP\SAS Libraries\Manufacturing\Capital\capital';
NOTE: Libref CAPITAL was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\capital
5          libname comp 'Q:\MFP\SAS Libraries\Manufacturing\Capital\comp';
NOTE: Libref COMP was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\comp
6          libname deflator 'Q:\MFP\SAS Libraries\Manufacturing\Capital\deflator';
NOTE: Libref DEFLATOR was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\deflator
7          libname sptools 'Q:\MFP\SAS Libraries\Manufacturing\Capital\sptools';
NOTE: Libref SPTOOLS was successfully assigned as follows: 
      Engine:        V9 
2                                                        The SAS System                              13:50 Friday, June 23, 2017

      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\sptools
8          libname lives 'Q:\MFP\SAS Libraries\Manufacturing\Capital\lives';
NOTE: Libref LIVES was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\lives
9          libname ras 'Q:\MFP\SAS Libraries\Manufacturing\Capital\ras';
NOTE: Libref RAS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\ras
10         libname beadfnew 'Q:\MFP\SAS Libraries\Manufacturing\Capital\beadfnew';
NOTE: Libref BEADFNEW was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\beadfnew
11         libname invest 'Q:\MFP\SAS Libraries\Manufacturing\Capital\invest';
NOTE: Libref INVEST was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\invest
12         libname rental 'Q:\MFP\SAS Libraries\Manufacturing\Capital\rental';
NOTE: Libref RENTAL was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\rental
13         libname kdetails 'Q:\MFP\SAS Libraries\Manufacturing\Capital\kdetails';
NOTE: Libref KDETAILS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\kdetails
14         libname kstock4d 'Q:\MFP\SAS Libraries\Manufacturing\Capital\kstock4d';
NOTE: Libref KSTOCK4D was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\kstock4d
15         libname pqfork 'Q:\MFP\SAS Libraries\Manufacturing\Capital\pqfork';
NOTE: Library PQFORK does not exist.
16         libname stock 'Q:\MFP\SAS Libraries\Manufacturing\Capital\stock';
NOTE: Libref STOCK was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\stock
17         libname final 'Q:\MFP\SAS Libraries\Manufacturing\Capital\final';
NOTE: Libref FINAL was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\Capital\final
18         libname exports 'Q:\MFP\SAS Libraries\Manufacturing\Capital\exports';
3                                                        The SAS System                              13:50 Friday, June 23, 2017

NOTE: Library EXPORTS does not exist.
19         libname IP 'Q:\MFP\SAS Libraries\Manufacturing\IP';
NOTE: Libref IP was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\MFP\SAS Libraries\Manufacturing\IP
20         
21         /*Connects to IPS2 database*/
22         LIBNAME SQL ODBC DSN=IPS2DB schema=sas;
NOTE: Libref SQL was successfully assigned as follows: 
      Engine:        ODBC 
      Physical Name: IPS2DB
23         
24         /*Creating a macro variable for the update year*/
25          data _null_;
26               length updateid 3 firstyr 4 lastyr 4 baseperiod 3;
27               infile "R:\MFP DataSets\Manufacturing\MFP\SAS Inputs\MFP_Parameters.txt" dlm='09'x firstobs=2;
28               input updateid firstyr lastyr baseperiod;
29               call symput('updateid', trim(left(put(updateid, 3.))));
30               call symput('last', trim(left(put(lastyr, 4.))));
31         run;

NOTE: The infile "R:\MFP DataSets\Manufacturing\MFP\SAS Inputs\MFP_Parameters.txt" is:
      Filename=R:\MFP DataSets\Manufacturing\MFP\SAS Inputs\MFP_Parameters.txt,
      RECFM=V,LRECL=32767,File Size (bytes)=69,
      Last Modified=21Jun2017:11:36:04,
      Create Time=11Jan2016:14:59:02

NOTE: 1 record was read from the infile "R:\MFP DataSets\Manufacturing\MFP\SAS Inputs\MFP_Parameters.txt".
      The minimum record length was 22.
      The maximum record length was 22.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

32         %put &updateid;
212
33         %put &last;
2015
34         
4                                                        The SAS System                              13:50 Friday, June 23, 2017

35          /*Creating macro variables for the names of NAICS Industries*/
36         data _null_;
37         set capital.indys nobs=x;
38               call symputx ("NAICS_Indy"!!left(_n_),NAICS);
39          run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      38:40   
NOTE: There were 86 observations read from the data set CAPITAL.INDYS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

40         
41         /*Determining if the IPS data should be pulled from the preliminary or current database view (current=published)*/
42         data work.update;
43         set sql.update (where=(updateid=&updateid));
44         if UpDateStatusID="Loading" then database="Preliminary";
45         if UpDateStatusID="PublicAccess" then database="Current";
46         run;

NOTE: There were 1 observations read from the data set SQL.update.
      WHERE updateid=212;
NOTE: The data set WORK.UPDATE has 1 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.08 seconds
      cpu time            0.03 seconds
      

47         
48         /*Creating a macro variable for the database variable*/
49         data _null_;
50         set work.update nobs=x;
51               call symput('database', trim(left(put(database, 11.))));
52          run;

NOTE: There were 1 observations read from the data set WORK.UPDATE.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
5                                                        The SAS System                              13:50 Friday, June 23, 2017

      cpu time            0.00 seconds
      

53         %put &database;
Preliminary
54         
55          /*getting the latest values from IPS
56            Valprod = T30
57            Lcomp   = L02
58            ImprDef = T05*/
59         data work.ips_data;
60         set sql.reportbuilder_&database (where=(updateid=&updateid. and (dataseriesid="T30" or dataseriesid="L02" or
61                                                                     dataseriesid="T05")));
62         NAICS=Industry;
63         keep year value dataseriesid industryid industry naics updatename;
64         run;

NOTE: There were 59529 observations read from the data set SQL.reportbuilder_Preliminary.
      WHERE (updateid=212) and dataseriesid in ('L02', 'T05', 'T30');
NOTE: The data set WORK.IPS_DATA has 59529 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           6.88 seconds
      cpu time            0.49 seconds
      

65         
66         /*Creating a Valprod Dataset*/
67         proc sql;
68          	create table work.Valprod as
69         	select a.naics, b.naics, b.year, b.value, b.dataseriesid
70         	from capital.indys a
71         	inner join work.ips_data b
72         	on a.naics=b.naics
73         	where b.dataseriesid="T30";
WARNING: Variable NAICS already exists on file WORK.VALPROD.
NOTE: Table WORK.VALPROD created, with 2580 rows and 4 columns.

74         quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
6                                                        The SAS System                              13:50 Friday, June 23, 2017

      cpu time            0.01 seconds
      

75         /*Creating a Lcomp Dataset*/
76         proc sql;
77          	create table work.Lcomp as
78         	select a.naics, b.naics, b.year, b.value, b.dataseriesid
79         	from capital.indys a
80         	inner join work.ips_data b
81         	on a.naics=b.naics
82         	where b.dataseriesid="L02";
WARNING: Variable NAICS already exists on file WORK.LCOMP.
NOTE: Table WORK.LCOMP created, with 2580 rows and 4 columns.

83         quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

84         /*Creating a ImprDef Dataset*/
85         proc sql;
86          	create table work.ImprDef as
87         	select a.naics, b.naics, b.year, b.value, b.dataseriesid
88         	from capital.indys a
89         	inner join work.ips_data b
90         	on a.naics=b.naics
91         	where b.dataseriesid="T05";
WARNING: Variable NAICS already exists on file WORK.IMPRDEF.
NOTE: Table WORK.IMPRDEF created, with 2580 rows and 4 columns.

92         quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

93         
94         proc sort data=work.valprod;
95         by naics year;
7                                                        The SAS System                              13:50 Friday, June 23, 2017

96         run;

NOTE: There were 2580 observations read from the data set WORK.VALPROD.
NOTE: The data set WORK.VALPROD has 2580 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

97         proc transpose data=work.valprod out=final.ValProd (drop=_name_ _label_) prefix=Valprod_;
98         by naics;
99         id year;
100        var value;
101        run;

NOTE: There were 2580 observations read from the data set WORK.VALPROD.
NOTE: The data set FINAL.VALPROD has 86 observations and 31 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

102        proc sort data=work.Lcomp;
103        by naics year;
104        run;

NOTE: There were 2580 observations read from the data set WORK.LCOMP.
NOTE: The data set WORK.LCOMP has 2580 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

105        proc transpose data=work.Lcomp out=Final.Lcomp (drop=_name_ _label_)prefix=Lcomp_;
106        by naics;
107        id year;
108        var value;
109        run;

NOTE: There were 2580 observations read from the data set WORK.LCOMP.
8                                                        The SAS System                              13:50 Friday, June 23, 2017

NOTE: The data set FINAL.LCOMP has 86 observations and 31 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

110        
111        proc sort data=work.imprdef;
112        by naics year;
113        run;

NOTE: There were 2580 observations read from the data set WORK.IMPRDEF.
NOTE: The data set WORK.IMPRDEF has 2580 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

114        proc transpose data=work.imprdef out=work.imprdef2 (drop=_name_ _label_);
115        by naics;
116        id year;
117        var value;
118        run;

NOTE: There were 2580 observations read from the data set WORK.IMPRDEF.
NOTE: The data set WORK.IMPRDEF2 has 86 observations and 31 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

119        /*Rebasing Imprdef to 1997*/
120        data deflator.ImpLPI4D;
121        set work.imprdef2;
122        %macro rebase;
123        %do year=1987 %to &last;
124        ImprDef_&year=_&year/_1997*100;
125        %end;
126        %mend rebase;
127        %rebase;
9                                                        The SAS System                              13:50 Friday, June 23, 2017

128        keep naics ImprDef_:;
129        run;

NOTE: There were 86 observations read from the data set WORK.IMPRDEF2.
NOTE: The data set DEFLATOR.IMPLPI4D has 86 observations and 30 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

130        
131        /*Making sure the NAICS variable from IP is text*/
132        data work.ipcomp (rename=(naics=naics2));
133        set ip.ipcomp;
134        run;

NOTE: There were 86 observations read from the data set IP.IPCOMP.
NOTE: The data set WORK.IPCOMP has 86 observations and 30 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

135        data work.ipcomp;
136        retain naics;
137        set work.ipcomp;
138        if Vtype(naics2)="N" then NAICS=put(naics2,4.);
139        Else NAICS=NAICS2;
140        %macro loop;
141        %do year=1987 %to &last;
142        IPComp_&year=y&year;
143        %end;
144        %mend loop;
145        %loop;
146        drop naics2 y:;
147        run;

NOTE: There were 86 observations read from the data set WORK.IPCOMP.
NOTE: The data set WORK.IPCOMP has 86 observations and 30 variables.
NOTE: DATA statement used (Total process time):
10                                                       The SAS System                              13:50 Friday, June 23, 2017

      real time           0.01 seconds
      cpu time            0.01 seconds
      

148        
149        /*Calculating CapComp*/
150        data comp.capcom;
151        merge final.valprod final.lcomp work.ipcomp;
152        by naics;
153        %macro loop;
154        %do year=1987 %to &last;
155        CapComp_&year=Valprod_&year - Lcomp_&year - IPComp_&year;
156        if CapComp_&year <0 then CapComp_&year = 1;
157        %end;
158        %mend loop;
159        %loop;
160        keep naics capcomp:;
161        run;

NOTE: There were 86 observations read from the data set FINAL.VALPROD.
NOTE: There were 86 observations read from the data set FINAL.LCOMP.
NOTE: There were 86 observations read from the data set WORK.IPCOMP.
NOTE: The data set COMP.CAPCOM has 86 observations and 30 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

162        
163        data comp.negative_capcomp;
164        set comp.capcom;
165        %macro loop;
166        %do year=1987 %to &last;
167        if CapComp_&year =1 then Count_&year = 1;
168        %end;
169        %mend loop;
170        %loop;
171        Sum_of_Negative_CapComps= sum(of count_:);
172        keep Sum_of_Negative_CapComps;
173        run;
11                                                       The SAS System                              13:50 Friday, June 23, 2017


NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      86 at 171:27   
NOTE: There were 86 observations read from the data set COMP.CAPCOM.
NOTE: The data set COMP.NEGATIVE_CAPCOMP has 86 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

174        /*For use in the MFP SAS program*/
175        data comp.capcomp;
176        set comp.capcom;
177        %macro loop;
178        %do year=1987 %to &last;
179        y&year =CapComp_&year;
180        %end;
181        %mend loop;
182        %loop;
183        keep naics y:;
184        run;

NOTE: There were 86 observations read from the data set COMP.CAPCOM.
NOTE: The data set COMP.CAPCOMP has 86 observations and 30 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

185        /*Transposing CapComp so that year are rows. This is for rental prices in step 10*/
186        proc transpose data=comp.capcom out=work.capcom2 prefix=CapComp_;
187        id naics;
188        run;

NOTE: There were 86 observations read from the data set COMP.CAPCOM.
NOTE: The data set WORK.CAPCOM2 has 29 observations and 87 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
12                                                       The SAS System                              13:50 Friday, June 23, 2017

      

189        data comp.capcom2;
190        set work.capcom2;
191        Year=substr(_name_,9)*1;
192        drop _name_;
193        run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      191:6   
NOTE: There were 29 observations read from the data set WORK.CAPCOM2.
NOTE: The data set COMP.CAPCOM2 has 29 observations and 87 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           8.25 seconds
      cpu time            1.31 seconds
      
